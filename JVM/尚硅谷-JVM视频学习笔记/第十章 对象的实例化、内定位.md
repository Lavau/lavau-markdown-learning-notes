# 第十章 对象的实例化、内存布局与访问定位

## 10.1 对象的实例化

### 10.1.1 创建对象的方式

- new
- 反射

	- Class 的 newInstance()
	- Constructor 的 newInstance()

- Object.clone()
- 反序列化
- 第三方库 Objenesis

### 10.1.2 创建对象的步骤

- 1、加载类
- 2、分配内存
- 3、并发处理
- 4、初始化空间
- 5、设置对象头
- 6、执行 <init>()

## 10.2 对象的内存布局

### 对象头

- 包含两部分

	- 运行时元数据（Mark Word）

		- 哈希值
		- GC 分代年龄
		- 锁状态标志
		- 线程持有锁
		- 偏向线程 ID
		- 偏向时间戳

	- 类型指针

		- 执行类元数据 InstanceKlass，确定该对象所属的类型

- 说明

	- 如果是数据，记录数组长度

### 实例数据

- 说明

	- 储存对象真正的有效信息（包括：代码中定义的各类型的字段）

- 规则

	- 相同宽度的字段分配到一起
	- 父类变量出现在子类变量之前
	- 参数 CompactFields 为 true，子类变量可能插入到父类变量的间隙

### 对其填充

- 仅仅起占位符的作用，非必须

## 10.3 对象的访问定位

